const {createApp} = VuecreateApp({	delimiters: ['${', '}$'],	mixins: [window.mix ? window.mix : {}],	methods: {		getCookie(name) {			let cookieValue = null;			if (document.cookie && document.cookie !== '') {				const cookies = document.cookie.split(';');				for (let i = 0; i < cookies.length; i++) {					const cookie = cookies[i].trim();					// Does this cookie string begin with the name we want?					if (cookie.substring(0, name.length + 1) === (name + '=')) {						cookieValue = decodeURIComponent(cookie.substring(name.length + 1));						break;					}				}			}			return cookieValue;		},		postData(url, payload, headers = {}) {			return axios.post(				url,				payload,				{					headers: {						'X-CSRFToken': this.getCookie('csrftoken'),						...(headers || {})					}				})				.then(response => {					return {						data: response?.data,						status: response.status,					}					return response.data ? response.data : response.json?.()				}).catch((error) => {					console.warn(`Метод '${url}' вернул статус код ${error.response.status}`)					throw error				})		},		getData(url, payload) {			return axios.get(url, {params: payload})				.then(response => {					return response.data ? response.data : response.json?.()				})				.catch((error) => {					console.warn('Method ' + url + ' not implemented')					throw error				})		},		search() {			location.assign(`/catalog/?filter=${this.searchText}`)		},		getCategories() {			this.getData('/api/categories/')				.then(data => this.categories = data)				.catch(() => {					console.warn('Error getting categories')					alert('Error getting categories')					this.categories = []				})		},		getBasket() {			this.getData('/api/basket/')				.then(data => {					const basket = {}					data.forEach(item => {						basket[item.id] = {							...item						}					})					this.basket = basket				}).catch(() => {				console.warn('Error receiving the basket')				this.basket = {}			})		},		// getLastOrder() {		// 	this.getData('/api/orders/active/')		// 		.then(data => {		// 			this.order = {		// 				...this.order,		// 				...data		// 			}		// 		})		// 		.catch(() => {		// 			console.warn('Ошибка при получении активного заказа')		// 			this.order = {		// 				...this.order,		// 			}		// 		})		// },		addToBasket(item, count = 1) {			const {id} = item			this.postData('/api/basket/', {id, count})				.then(({data}) => {					this.basket = data				}).catch((error) => {                    console.warn(error.response.data)                    alert(JSON.stringify(error.response.data))                })		},		removeFromBasket(id, count) {			axios.delete('/api/basket/',				{					data: {id, count},					headers: {						'X-CSRFToken': this.getCookie('csrftoken'),					}				})				.then(({data}) => {					this.basket = data				})				.catch(() => {					console.warn('Error when deleting an order from the shopping cart')					alert('Error when deleting an order from the shopping cart')				})		},		signOut() {			this.postData('/api/sign-out/')				.finally(() => {					location.assign(`/`)				})		}	},	computed: {		basketCount() {			let shortBasket = (this.basket && Object.values(this.basket)?.reduce((acc, {count, price}) => {				acc.count += count				acc.price += count * price				return acc			}, {count: 0, price: 0})) ?? {count: 0, price: 0}			shortBasket.price = (Math.round(shortBasket.price * 100) / 100)			return shortBasket		}	},	data() {		return {			// catalog page			filters: {				price: {					minValue: 1,					maxValue: 1500,					currentFromValue: 7,					currentToValue: 27,				},			},			sortRules: [				{id: 'title', title: 'Title'},				{id: 'rating', title: 'Rating'},				{id: 'popularity', title: 'Popularity'},				{id: 'price', title: 'Price'},				{id: 'reviews', title: 'Reviews'},				{id: 'date', title: 'Date'},			],			topTags: [],			// reused data			categories: [],			// reused data			catalogFromServer: [],			orders: [],			cart: [],			paymentData: {},			basket: {},			// order: {			// 	orderId: null,			// 	createdAt: '',			// 	products: [],			// 	fullName: '',			// 	phone: '',			// 	email: '',			// 	deliveryType: '',			// 	city: '',			// 	address: '',			// 	paymentType: '',			// 	totalCost: 0,			// 	status: ''			// },			searchText: '',			orderStatuses: {				CT: "Cart",				ED: "Editing",				AC: "Accepted",				RJ: "Rejected",				CO: "Completed",			},			deliveryTypes: {				OR: "Ordinary",				EX: "Express",			},			paymentTypes: {				ON: "Online",				SO: "Some one",				CA: "Cash",			},		}	},	mounted() {		this.getCategories()		this.getBasket()		// this.getLastOrder()	}}).mount('#site')